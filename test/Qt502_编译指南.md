# Qt Creator 5.0.2 编译指南

## 🎯 针对Qt Creator 5.0.2的特殊配置

### 版本说明
Qt Creator 5.0.2是一个较老的版本，需要特殊的兼容性处理：
- 使用旧式信号槽语法 (`SIGNAL/SLOT`)
- 使用C++98标准
- 避免使用新特性如`QPropertyAnimation`
- 简化项目结构

### 📁 推荐文件结构
```
Hanoi/
├── src/
│   ├── main_simple.cpp      # 主程序
│   ├── mainwindow_simple.h  # 简化窗口头文件
│   └── mainwindow_simple.cpp # 简化窗口实现
├── HanoiTower_Qt502.pro     # Qt 5.0.2专用项目文件
└── Qt502_编译指南.md        # 本文档
```

## 🚀 编译步骤

### Windows环境
```cmd
# 1. 清理旧文件
del /s /q obj moc bin

# 2. 生成Makefile
qmake HanoiTower_Qt502.pro

# 3. 编译
mingw32-make
# 或者
nmake
```

### Linux/macOS环境
```bash
# 1. 清理旧文件
rm -rf obj moc bin

# 2. 生成Makefile
qmake HanoiTower_Qt502.pro

# 3. 编译
make
```

## 🔧 Qt Creator中的操作

1. **打开项目**
   - 文件 → 打开文件或项目
   - 选择 `HanoiTower_Qt502.pro`

2. **配置构建**
   - 项目 → 构建设置
   - 确保选择Debug或Release模式

3. **编译运行**
   - 构建 → 构建项目
   - 点击绿色运行按钮

## ⚠️ Qt 5.0.2特殊注意事项

### 1. 信号槽语法
**必须使用旧式语法：**
```cpp
// ✅ 正确（Qt 5.0.2兼容）
connect(button, SIGNAL(clicked()), this, SLOT(onButtonClicked()));

// ❌ 错误（Qt 5.0.2不支持）
connect(button, &QPushButton::clicked, this, &MainWindow::onButtonClicked);
```

### 2. C++标准
**使用C++98标准：**
```pro
CONFIG += c++98  # 不要使用c++11或更高版本
```

### 3. 避免的特性
以下特性在Qt 5.0.2中可能不稳定：
- `QPropertyAnimation`（动画类）
- `auto`关键字
- `nullptr`（使用`NULL`替代）
- Lambda表达式
- `QOverload`

### 4. 头文件包含
确保包含所有必要的头文件：
```cpp
#include <QApplication>
#include <QMainWindow>
#include <QPushButton>
#include <QVBoxLayout>
#include <QHBoxLayout>
#include <QLabel>
#include <QSpinBox>
#include <QSlider>
#include <QTextEdit>
#include <QGroupBox>
#include <QSplitter>
#include <QMenuBar>
#include <QStatusBar>
#include <QMessageBox>
#include <QTime>
#include <QKeySequence>
#include <QMenu>
#include <QAction>
```

## 🐛 常见编译错误解决

### 错误1: "error: 'nullptr' was not declared"
```cpp
// 解决方案：使用NULL替代nullptr
Widget* ptr = NULL;  // 不要使用nullptr
```

### 错误2: "error: no matching function for call to 'connect'"
```cpp
// 解决方案：使用SIGNAL/SLOT宏
connect(obj, SIGNAL(signal()), this, SLOT(slot()));
```

### 错误3: "error: 'auto' does not name a type"
```cpp
// 解决方案：明确指定类型
QWidget* widget = new QWidget();  // 不要使用auto
```

### 错误4: MOC错误
```bash
# 解决方案：清理并重新编译
rm -rf moc obj
qmake
make clean
make
```

## 📋 当前实现状态

### ✅ 已实现功能
- 基本窗口界面
- 菜单栏和状态栏
- 控制面板布局
- 手动操作按钮
- 设置面板
- 信息显示面板
- 操作日志面板

### 🔄 待实现功能
- 游戏逻辑类（HanoiTower）
- 控制器类（GameController）
- 图形显示（盘子和柱子）
- 动画效果
- 实际的游戏功能

## 🎯 下一步计划

1. **阶段1**: 确保界面正常编译运行
2. **阶段2**: 添加简单的游戏逻辑（无动画）
3. **阶段3**: 实现基本的盘子移动功能
4. **阶段4**: 添加演示功能

## 💡 调试技巧

1. **使用qDebug()输出调试信息**
```cpp
#include <QDebug>
qDebug() << "调试信息：" << value;
```

2. **逐步注释代码**
如果编译失败，逐步注释代码找出问题所在

3. **检查MOC文件**
确保moc目录下生成了正确的moc_*.cpp文件

4. **使用简单测试**
先创建最简单的窗口，确认基础环境正常

## 🔗 相关资源

- Qt 5.0.2官方文档
- Qt信号槽机制说明
- C++98标准参考 